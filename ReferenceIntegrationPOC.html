<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Test Appraisal Company</title>
    <link href="https://bootswatch.com/flatly/bootstrap.min.css" rel="stylesheet">
    <!-- Include Bootstrap Datepicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker3.min.css" />
    <style type="text/css">
        /* Start by setting display:none to make this hidden.
        Then we position it in relation to the viewport window
        with position:fixed. Width, height, top and left speak
        speak for themselves. Background we set to 80% white with
        our animation centered, and no-repeating */
        .modal {
            display: none;
            position: fixed;
            z-index: 1500 !important;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: rgba( 30, 30, 30, .5 );
        }

        /* When the body has the loading class, we turn
        the scrollbar off with overflow:hidden */
        body.loading {
            overflow: hidden;
        }

            /* Anytime the body has the loading class, our
        modal element will be visible */
            body.loading .modal {
                display: block;
            }

        .form-label {
            padding: 3px;
        }

        .form-control {
            margin-bottom: 2px !important;
        }

        .modal-header {
            background: #eff4f9;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .modal-success-header {
            background: #18bebc;
            color: white;
        }

        .modal-error-header {
            background: #e74c3c;
            color: white;
        }

        .modal {
            text-align: center;
            padding: 0 !important;
        }

            .modal:before {
                content: '';
                display: inline-block;
                height: 100%;
                vertical-align: middle;
                margin-right: -4px;
            }

        .modal-dialog {
            display: inline-block;
            text-align: left;
            vertical-align: middle;
        }

        .radio-inline {
            vertical-align: middle;
        }

        .thead-default {
            background-color: #eff4f9;
        }

        .tab-content {
            border: 1px solid #ecf0f1;
            border-top: none;
            padding: 5px;
        }

        .nav-tabs {
            margin-bottom: 0;
        }

        .tab-content > .tab-pane {
            visibility: hidden;
            padding: 5px;
        }

        .tab-content > .active {
            visibility: visible;
        }

        .radiolist {
            padding: 3px;
        }

        .selected {
            background-color: #fbe8b4;
        }

        .btn-file {
            position: relative;
            overflow: hidden;
        }

            .btn-file input[type=file] {
                position: absolute;
                top: 0;
                right: 0;
                min-width: 100%;
                min-height: 100%;
                font-size: 100px;
                text-align: right;
                filter: alpha(opacity=0);
                opacity: 0;
                outline: none;
                background: white;
                cursor: inherit;
                display: block;
            }

        .date-picker {
            padding: 0px;
        }

        .order-row {
            cursor: pointer;
        }

        .pending {
            padding: 2px;
            background-color: #eb6759;
            color: white;
            border-radius: 3px;
            font-size: 13px;
            text-align: center;
        }

        .completed {
            padding: 2px;
            background-color: #8abc82;
            color: white;
            border-radius: 3px;
            font-size: 13px;
            text-align: center;
        }

        .otherstatus {
            padding: 2px;
            background-color: #dab478;
            color: white;
            border-radius: 3px;
            font-size: 13px;
            text-align: center;
        }

        .modal-header > h3 {
            font-size: 18px;
        }

        .panel-heading .accordion-toggle:after {
            /* symbol for "opening" panels */
            font-family: 'Glyphicons Halflings'; /* essential for enabling glyphicon */
            content: "\e114"; /* adjust as needed, taken from bootstrap.css */
            float: right; /* adjust as needed */
            color: grey; /* adjust as needed */
        }

        .panel-heading .accordion-toggle.collapsed:after {
            /* symbol for "collapsed" panels */
            content: "\e080"; /* adjust as needed, taken from bootstrap.css */
        }
    </style>
</head>
<body>

    <!-- Add Attachments Modal -->
    <div id="addAttachmentsModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header panel-default">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Attachment List</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12" style="text-align: right; padding-bottom: 4px;">
                            <button type="button" class="btn btn-default btn-sm">Attach</button>
                        </div>
                    </div>
                    <table class="table table-hover table-bordered">
                        <thead class="thead-default">
                            <tr>
                                <th>#</th>
                                <th>Attachment Type</th>
                                <th>Attachment Name</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">1</th>
                                <td>Sales Contract</td>
                                <td>SalesContract.pdf</td>
                                <td><a href="#" class="btn btn-danger btn-sm" role="button"><span class="glyphicon glyphicon-remove"></span></a></td>
                            </tr>
                            <tr>
                                <th scope="row">2</th>
                                <td>Tax Document</td>
                                <td>TaxDocument_2017.pdf</td>
                                <td><a href="#" class="btn btn-danger btn-sm" role="button"><span class="glyphicon glyphicon-remove"></span></a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Update Status Modal -->
    <div id="updateStatusModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header panel-default">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Update Status</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="form-group">
                            <label for="orderStatus" class="col-lg-4 control-label">Status</label>
                            <div class="col-lg-8">
                                <select class="form-control" id="orderStatus">
                                    <option value="delayed">Delayed</option>
                                    <option value="placeonhold">Place On Hold</option>
                                    <option value="resume">Resume</option>
                                    <option value="cancelorder">Cancel Order</option>
                                    <option value="revisionneeded">Revision Needed</option>
                                    <option value="revisionrequestcancelled">Revision Request Cancelled</option>
                                    <option value="message">Message</option>
                                    <option value="comment">Comment - Action Required</option>
                                    <option value="delivery">Delivery via SureReceipts</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="clientGroup" class="col-lg-4 control-label">Status Comment</label>
                            <div class="col-lg-8">
                                <textarea class="form-control" rows="3" id="orderStatusComment"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="clientGroup" class="col-lg-4 control-label">Borrower Email</label>
                            <div class="col-lg-8">
                                <input type="text" class="form-control" id="orderBorrowerEmail" placeholder="Borrower Email" disabled>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="updateOrderStatus">Update</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div id="messageModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header modal-success-header">
                    <h4 class="modal-title">Success</h4>
                </div>
                <div class="modal-body" id="successMessage">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Error Message Modal -->
    <div id="errorModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header modal-error-header">
                    <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
                    <h4 class="modal-title">Error</h4>
                </div>
                <div class="modal-body" id="errorMessage">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <!-- [START] This block is for the Header -->
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home"></span> &nbsp; Test Appraisal Company</a>
            </div>
        </div>
    </nav>
    <!-- [END] This block is for the Header -->
    <div class="container" style="padding: 5px; margin: 5px; width: 99%;">

        <div class="modal"></div>

        <form id="appraisalForm">

            <!-- [START] This block is for the top Row -->
            <div class="row">
                <!-- [START] This block is for the Login Column -->
                <div class="col-lg-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Login Information</h3>
                        </div>
                        <div class="panel-body">
                            <div class="form-group">
                                <label for="inputUserName" class="col-lg-2 control-label">User Name</label>
                                <div class="col-lg-10">
                                    <input type="text" class="form-control" id="inputUserName" placeholder="User Name">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputPassword" class="col-lg-2 control-label">Password</label>
                                <div class="col-lg-10">
                                    <input type="password" class="form-control" id="inputPassword" placeholder="Password">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputNetworkID" class="col-lg-2 control-label">Network ID</label>
                                <div class="col-lg-10">
                                    <input type="text" class="form-control" id="inputNetworkID" placeholder="Network ID">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="saveLoginInfo"> Save Login Information
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- [END] This block is for the Login Column -->
                <!-- [START] This block is for the Loan Information Column -->
                <div class="col-lg-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Loan Information</h3>
                        </div>
                        <div class="panel-body">
                            <div class="form-group">
                                <label for="inputBorrower" class="col-lg-4 control-label">Borrower</label>
                                <div class="col-lg-8">
                                    <div id="inputBorrower" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputCoBorrower" class="col-lg-4 control-label">Co Borrower</label>
                                <div class="col-lg-8">
                                    <div id="inputCoBorrower" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputPropertyAddress" class="col-lg-4 control-label">Property Address</label>
                                <div class="col-lg-8">
                                    <div id="inputPropertyAddress" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputPropertyCounty" class="col-lg-4 control-label">Property County</label>
                                <div class="col-lg-8">
                                    <div id="inputPropertyCounty" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputLoanReference" class="col-lg-4 control-label">Loan Reference</label>
                                <div class="col-lg-8">
                                    <div id="inputLoanReference" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputFHACaseNum" class="col-lg-4 control-label">FHA Case Num</label>
                                <div class="col-lg-8">
                                    <div id="inputFHACaseNum" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputPurchasePrice" class="col-lg-4 control-label">Purchase Price</label>
                                <div class="col-lg-8">
                                    <div id="inputPurchasePrice" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputLoanAmount" class="col-lg-4 control-label">Loan Amount</label>
                                <div class="col-lg-8">
                                    <div id="inputLoanAmount" class="col-lg-8 control-label form-label">
                                        &nbsp;
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- [END] This block is for the Borrower Information Column -->
            </div>
            <!-- [END] This block is for the top Row -->
            <!--[START] This block is for the Second Row -->
            <div class="row">
                <div id="tabContainer" style="padding: 12px;">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#order" data-toggle="tab">Order</a></li>
                        <li><a href="#loanProperty" data-toggle="tab">Loan/Property</a></li>
                        <li><a href="#contacts" data-toggle="tab">Contacts</a></li>
                        <li><a href="#payment" data-toggle="tab">Payment</a></li>
                        <li><a href="#checkStatus" data-toggle="tab">Check Status</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content">
                        <div class="tab-pane fade active in" id="order">

                            <div style="padding: 5px;">
                                <!--[START] This block is for the First Row in the Order Tab -->
                                <div class="row">
                                    <div class="col-lg-8">
                                        <div style="text-align: right; padding: 4px;">
                                            <!--<label class="radio-inline">
                                                <input type="radio" name="radioRequestType" value="quote" checked /> Quote Request
                                            </label>-->

                                            <label class="radio-inline">
                                                <input type="radio" name="radioRequestType" value="new" checked /> New Order
                                            </label>

                                            <label class="radio-inline">
                                                <input type="radio" name="radioRequestType" value="existing" /> Existing Order
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <div class="col-lg-12">
                                                <select class="form-control" id="existingOrdersList"></select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--[END] This block is for the First Row in the Order Tab -->
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">Products</h3>
                                            </div>
                                            <div class="panel-body" style="padding: 1px;">
                                                <div class="form-control" id="productsList" style="height:390px; overflow-y: auto;"></div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-lg-6">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h3 class="panel-title">&nbsp;</h3>
                                            </div>
                                            <div class="panel-body" style="height:390px;">
                                                <!--<div class="form-group">
                                                    <label for="clientGroup" class="col-lg-4 control-label">Client Group</label>
                                                    <div class="col-lg-8">
                                                        <select class="form-control" id="clientGroup" disabled></select>
                                                    </div>
                                                </div>-->
                                                <div class="form-group">
                                                    <label for="amc" class="col-lg-4 control-label">AMC</label>
                                                    <div class="col-lg-8">
                                                        <select class="form-control" id="amc"></select>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-lg-4 control-label">Intent to Proceed Received Date</label>
                                                    <div class="col-lg-8 date">
                                                        <div class="input-group input-append date date-picker">
                                                            <input type="text" class="form-control" name="date" id="proceedReceivedDate" />
                                                            <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-lg-4 control-label">Disclosure Date</label>
                                                    <div class="col-lg-8 date">
                                                        <div class="input-group input-append date date-picker">
                                                            <input type="text" class="form-control" name="date" id="disclosureDate" />
                                                            <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                                                        </div>
                                                    </div>
                                                    <!--<label for="disclosureDate" class="col-lg-4 control-label">Disclosure Date</label>
                                                    <div class="col-lg-8">
                                                        <input type="text" class="form-control" id="disclosureDate" placeholder="" disabled>
                                                    </div>-->
                                                </div>
                                                <div class="form-group">
                                                    <label for="earlyAppraisalConsent" class="col-lg-4 control-label">Early Appraisal Consent</label>
                                                    <div class="col-lg-8">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" id="earlyAppraisalConsent">
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="orderedBy" class="col-lg-4 control-label">Ordered By</label>
                                                    <div class="col-lg-8">
                                                        <input type="text" class="form-control" id="orderedBy" placeholder="">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="notificationEmail" class="col-lg-4 control-label">Notification Email</label>
                                                    <div class="col-lg-8">
                                                        <input type="text" class="form-control" id="notificationEmail" placeholder="">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-lg-4 control-label">Due Date</label>
                                                    <div class="col-lg-8 date">
                                                        <div class="input-group input-append date date-picker">
                                                            <input type="text" class="form-control" name="date" id="dueDate" />
                                                            <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                                                        </div>
                                                    </div>
                                                    <!--<label for="dueDate" class="col-lg-4 control-label">Due Date</label>
                                                    <div class="col-lg-8">
                                                        <input type="text" class="form-control" id="dueDate" placeholder="" disabled>
                                                    </div>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--[START] This block is for the Second Row in the Order Tab -->
                                <div class="row">
                                    <div style="padding: 5px;">
                                        <div class="col-lg-4">
                                            <div class="checkbox">
                                                <label class="radio-inline">
                                                    <input type="checkbox" id="chkRushOrder"> Rush Order
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="checkbox" id="chkComplex"> Complex
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-8" style="text-align: right; display: none;">
                                            <button type="button" class="btn btn-warning" id="btnSendDocs" disabled>Send Additional Documents</button>
                                            <button type="button" class="btn btn-warning" id="btnAddAttachments">Add Attachments</button>
                                        </div>
                                    </div>
                                </div>
                                <!--[END] This block is for the Second Row in the Order Tab -->
                                <!--[START] This block is for the Third Row in the Order Tab -->
                                <div class="row">
                                    <div style="padding: 12px; height: 200px; margin-bottom: 10px;">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">Order Comments</div>
                                            <div class="panel-body" style="padding: 0px;">
                                                <div class="col-lg-12" style="padding: 0px;">
                                                    <textarea class="form-control" rows="3" id="orderComments"></textarea>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <!--[END] This block is for the Third Row in the Order Tab -->
                            </div>

                        </div>
                        <div class="tab-pane fade" id="loanProperty">
                            <div class="section">
                                <div class="row">
                                    <!--[START] This block is for the Loan Property Tab -->
                                    <!--[START] This block is for the First Column -->
                                    <div class="col-lg-6">
                                        <div class="row">
                                            <div class="form-group">
                                                <label for="loanPurpose" class="col-lg-4 control-label">Loan Purpose</label>
                                                <div class="col-lg-8">
                                                    <select class="form-control" id="loanPurpose">
                                                        <option value="0"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="loanType" class="col-lg-4 control-label">Loan Type</label>
                                                <div class="col-lg-8">
                                                    <select class="form-control" id="loanType">
                                                        <option value="0"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="occupancy" class="col-lg-4 control-label">Occupancy</label>
                                                <div class="col-lg-8">
                                                    <select class="form-control" id="occupancy">
                                                        <option value="0"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="propertyType" class="col-lg-4 control-label">Property Type</label>
                                                <div class="col-lg-8">
                                                    <select class="form-control" id="propertyType">
                                                        <option value="0"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="propertyRights" class="col-lg-4 control-label">Property Rights</label>
                                                <div class="col-lg-8">
                                                    <select class="form-control" id="propertyRights">
                                                        <option value="0"></option>
                                                        <option value="1">Fee Simple</option>
                                                        <option value="2">Leasehold</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">Property Characteristics</div>
                                                <div class="panel-body">
                                                    <div class="panel-body" style="padding: 1px;">
                                                        <div class="form-control" id="propertyCharacteristics" style="height:390px;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--[END] This block is for the First Column -->
                                    <!--[START] This block is for the Second Column -->
                                    <div class="col-lg-6">
                                        <div class="row">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">Borrower</div>
                                                <div class="panel-body">
                                                    <div class="row">
                                                        <div class="form-group">
                                                            <label for="borrowerName" class="col-lg-4 control-label">Name</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerName" placeholder="Name">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerHomePhone" class="col-lg-4 control-label">Home Phone</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerHomePhone" placeholder="Home Phone">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerWorkPhone" class="col-lg-4 control-label">Work Phone</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerWorkPhone" placeholder="Work Phone">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerCellPhone" class="col-lg-4 control-label">Cell Phone</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerCellPhone" placeholder="Cell Phone">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerEmail" class="col-lg-4 control-label">Email</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerEmail" placeholder="Email">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerAddress" class="col-lg-4 control-label">Address</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerAddress" placeholder="Address">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerCity" class="col-lg-4 control-label">City</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerCity" placeholder="City">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerState" class="col-lg-4 control-label">State</label>
                                                            <div class="col-lg-8">
                                                                <select class="form-control" id="borrowerState"></select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="borrowerZip" class="col-lg-4 control-label">Zip</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="borrowerZip" placeholder="Zip">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">Co-Borrower</div>
                                                <div class="panel-body">
                                                    <div class="row">
                                                        <div class="form-group">
                                                            <label for="coBorrowerName" class="col-lg-4 control-label">Name</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerName" placeholder="Name">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerHomePhone" class="col-lg-4 control-label">Home Phone</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerHomePhone" placeholder="Home Phone">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerWorkPhone" class="col-lg-4 control-label">Work Phone</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerWorkPhone" placeholder="Work Phone">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerCellPhone" class="col-lg-4 control-label">Cell Phone</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerCellPhone" placeholder="Cell Phone">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerEmail" class="col-lg-4 control-label">Email</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerEmail" placeholder="Email">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerAddress" class="col-lg-4 control-label">Address</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerAddress" placeholder="Address">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerCity" class="col-lg-4 control-label">City</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerCity" placeholder="City">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerState" class="col-lg-4 control-label">State</label>
                                                            <div class="col-lg-8">
                                                                <select class="form-control" id="coBorrowerState"></select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="coBorrowerZip" class="col-lg-4 control-label">Zip</label>
                                                            <div class="col-lg-8">
                                                                <input type="text" class="form-control" id="coBorrowerZip" placeholder="Zip">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--[END] This block is for the Second Column -->
                                    <!--[END] This block is for the Loan Property Tab -->
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="contacts">
                            <div class="panel panel-default">
                                <div class="panel-heading">Agent / Occupant / Owner / Other</div>
                                <div class="panel-body">

                                    <!--[START] This block is for the First Row of the Contacts Tab -->
                                    <div class="row">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label for="contactAgent" class="col-lg-4 control-label">
                                                    <select class="form-control" id="contactAgent">
                                                        <option value="0"></option>
                                                        <option value="1">Agent</option>
                                                        <option value="2">Occupant</option>
                                                        <option value="3">Owner</option>
                                                        <option value="4">Other</option>
                                                        <option value="5">Broker</option>
                                                    </select>
                                                </label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="contactAgentName" placeholder="Name" disabled>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label for="contactType1" class="col-lg-4 control-label">
                                                    <select class="form-control" id="contactType1" disabled>
                                                        <option value="0"></option>
                                                        <option value="1">Home Phone</option>
                                                        <option value="2">Work Phone</option>
                                                        <option value="3">Cell Phone</option>
                                                        <option value="4">Email</option>
                                                    </select>
                                                </label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="contactType1Text" placeholder="" disabled>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                <label for="contactType2" class="col-lg-4 control-label" disabled>
                                                    <select class="form-control" id="contactType2" disabled>
                                                        <option value="0"></option>
                                                        <option value="1">Home Phone</option>
                                                        <option value="2">Work Phone</option>
                                                        <option value="3">Cell Phone</option>
                                                        <option value="4">Email</option>
                                                    </select>
                                                </label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="contactType2Text" placeholder="" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--[END] This block is for the First Row of the Contacts Tab -->
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Agent Details</div>
                                        <div class="panel-body" style="padding-left: 2px; padding-right: 2px;">
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="agentDtlsName" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="agentDtlsContactType1" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="agentDtlsContactType2" placeholder="" disabled>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Broker Details</div>
                                        <div class="panel-body" style="padding-left: 2px; padding-right: 2px;">
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="brokerDtlsName" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="brokerDtlsContactType1" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="brokerDtlsContactType2" placeholder="" disabled>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Occupant Details</div>
                                        <div class="panel-body" style="padding-left: 2px; padding-right: 2px;">
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="occupantDtlsName" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="occupantDtlsContactType1" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="occupantDtlsContactType2" placeholder="" disabled>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Owner Details</div>
                                        <div class="panel-body" style="padding-left: 2px; padding-right: 2px;">
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="ownerDtlsName" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="ownerDtlsContactType1" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="ownerDtlsContactType2" placeholder="" disabled>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Other Details</div>
                                        <div class="panel-body" style="padding-left: 2px; padding-right: 2px;">
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="otherDtlsName" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="otherDtlsContactType1" placeholder="" disabled>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="form-control" id="otherDtlsContactType2" placeholder="" disabled>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Appointment</div>
                                        <div class="panel-body" style="padding-left: 2px; padding-right: 2px;">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label for="appointmentContact" class="col-lg-4 control-label">Appointment Contact</label>
                                                        <div class="col-lg-8">
                                                            <select class="form-control" id="appointmentContact">
                                                                <option value="0"></option>
                                                                <option value="1">Borrower</option>
                                                                <option value="2">Co-Borrower</option>
                                                                <option value="3">Agent</option>
                                                                <option value="4">Occupant</option>
                                                                <option value="5">Owner</option>
                                                                <option value="6">Other</option>
                                                                <option value="7">Broker</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label for="branch" class="col-lg-4 control-label">Branch</label>
                                                        <div class="col-lg-8">
                                                            <input type="text" class="form-control" id="branch" placeholder="Branch">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="payment">
                            <!--[START] This block is for the First Row of the Payment Tab -->
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="paymentFor" class="col-lg-4 control-label">Payment For</label>
                                        <div class="col-lg-8">
                                            <select class="form-control" id="paymentFor">
                                                <option value="new">[New Order]</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label for="paymentType" class="col-lg-4 control-label">Payment Type</label>
                                        <div class="col-lg-8">
                                            <select class="form-control" id="paymentType"></select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--[END] This block is for the First Row of the Payment Tab -->
                            <!--[START] This block is for the Second Row of the Payment Tab -->
                            <div class="panel panel-default">
                                <div class="panel-heading">Credit Account Information</div>
                                <div class="panel-body" style="padding-left: 0px; padding-right: 0px;">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="amountDue" class="col-lg-4 control-label">Amount Due</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="amountDue" placeholder="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="accountHolderFirstName" class="col-lg-4 control-label">First Name</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="accountHolderFirstName" placeholder="Account Holder's First Name">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="accountHolderMiddleName" class="col-lg-4 control-label">Middle Name</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="accountHolderMiddleName" placeholder="Account Holder's Middle Name">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="accountHolderLastName" class="col-lg-4 control-label">Last Name</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="accountHolderLastName" placeholder="Account Holder's Last Name">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="creditCardNumber" class="col-lg-4 control-label">Credit Card Number</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="creditCardNumber" placeholder="Credit Card Number">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="emailToSendReceipt" class="col-lg-4 control-label">Email to Send Receipt:</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="emailToSendReceipt" placeholder="Email to Send Receipt">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="creditCardExpiration" class="col-lg-4 control-label">Expiration (MM/YYYY)</label>
                                                <div class="col-lg-4">
                                                    <select class="form-control" id="expirationMonth"></select>
                                                </div>
                                                <div class="col-lg-4">
                                                    <select class="form-control" id="expirationYear"></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label for="creditCardBillingAddress" class="col-lg-4 control-label">Billing Address</label>
                                                <div class="col-lg-8">
                                                    <input type="text" class="form-control" id="creditCardBillingAddress" placeholder="Billing Address">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class='col-lg-4'>
                                                <div class="form-group">
                                                    <label for="creditCardBillingCity" class="col-lg-4 control-label">City</label>
                                                    <div class="col-lg-8">
                                                        <input type="text" class="form-control" id="creditCardBillingCity" placeholder="City">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='col-lg-4'>
                                                <div class="form-group">
                                                    <label for="creditCardBillingState" class="col-lg-4 control-label">State</label>
                                                    <div class="col-lg-8">
                                                        <input type="text" class="form-control" id="creditCardBillingState" placeholder="State">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='col-lg-4'>
                                                <div class="form-group">
                                                    <label for="creditCardBillingZip" class="col-lg-4 control-label">Zip</label>
                                                    <div class="col-lg-8">
                                                        <input type="text" class="form-control" id="creditCardBillingZip" placeholder="Zip">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--[END] This block is for the Second Row of the Payment Tab -->
                            <!--[START] This block is for the Third Row of the Payment Tab -->
                            <div class="row">
                                <div class="col-lg-12" style="text-align: right;">
                                    <button type="button" class="btn btn-default" id="btnUpdatePayment" disabled>Update Payment Information</button>
                                </div>
                            </div>
                            <!--[END] This block is for the Third Row of the Payment Tab -->
                        </div>
                        <div class="tab-pane fade" id="checkStatus">
                            <!--[START] This block is for the Check Status Tab -->

                            <div class="row">
                                <div class='col-lg-8'>
                                    <div class="panel panel-default">
                                        <div class="panel-heading">Order History</div>
                                        <div class="panel-body">
                                            <input type="hidden" id="selectedOrderId" />
                                            <table class="table table-hover table-bordered" id="tblOrders">
                                                <thead class="thead-default">
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Date</th>
                                                        <th>Order Number</th>
                                                        <th>Product</th>
                                                        <th>Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                            <div class="panel panel-default" id="divNoOrders" style="display: none; background-color: #e3eddf;">
                                                <div class="panel-body">
                                                    There are no reports/orders available for this loan.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default" id="orderComments" style="display: none;">
                                        <div class="panel-heading">Order Comments</div>
                                        <div class="panel-body">
                                            Test
                                        </div>
                                    </div>
                                </div>
                                <div class='col-lg-4'>
                                    <div class="row">
                                        <button type="button" class="btn btn-default" id="btnViewDocuments" style="width: 100%;">View Documents in eFolder</button>
                                    </div>
                                    <div class="row" style="margin-top: 5px; display: none;" id="downloadedDocs">
                                        <div class="panel panel-primary">
                                            <div class="panel-heading">Documents Downloaded</div>
                                            <div class="panel-body" style="background-color: silver;">
                                                <div id="orderDocuments">
                                                </div>
                                                <div class="panel panel-default" id="divNoDocuments" style="display: none; background-color: #e3eddf;">
                                                    <div class="panel-body">
                                                        There are no documents/attachments available for this Order Id.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--[END] This block is for the Check Status Tab -->
                        </div>
                    </div>
                </div>
            </div>

            <!--[END] This block is for the Second Row -->


        </form>
    </div>
    <div class="footer navbar-fixed-bottom" style="padding: 2px; background-color: #ecf0f1;">
        <!--[START] This block is for the footer -->
        <div class="row">

            <div style="padding: 5px;">
                <div class="col-lg-2">
                    <button type="reset" class="btn btn-info" id="btnRefresh">Refresh Lists</button>
                    <button type="button" class="btn btn-info" id="btnUpdateStatus" style="display: none;">Update Status</button>
                </div>
                <div class="col-lg-10" style="text-align: right;">
                    <button type="button" class="btn btn-primary" id="btnSubmit">Submit Order</button>
                    <button type="button" class="btn btn-primary" id="btnClose">Close</button>
                </div>
            </div>

        </div>
        <!--[END] This block is for the footer -->
    </div>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://rawgit.com/abdennour/bootstrap-waitingfor/master/build/bootstrap-waitingfor.js"></script>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <script type="text/javascript">

        // these values get injected in
        var transactionId = '{{transactionId}}';
        var partnerAPIUrl = '{{APIUrl}}';
        var getUIEndPoint = 'api/ui/';
        var requestEndPoint = 'api/request/';
        var statusCheckEndPoint = 'api/status/';

        // Insert default values if injection didn't happen
        if (transactionId.toLowerCase().indexOf('{\{') == 0)
            transactionId = 'TransactionID';
        if (partnerAPIUrl.toLowerCase().indexOf('{\{') == 0)
            partnerAPIUrl = 'Partners Backend URL';

        var statusInterval = null;
        var _OrderProcessMessage = 'Please wait while your order is being processed..';
        var _CheckStatusMessage = 'Checking status of order number #orderno#. please wait..';
        var _ErrorMessage = 'There was an error processing the request.';
        var _OrderStatusTimeout = 30; // This is a timeout for checking the order acknowledgement status.

        var _LoanPurpose = null;
        var _MortgageType = null;
        var _LoanAmount = null;
        var _PurchasePrice = null;
        var _BorrowerState = null;
        var _OrderHistory = null;

        var $body = $("body");

        var _IsProgressOn = false;

        function ShowProgressBar(message) {

            if (typeof message == 'undefined' || message == null)
                waitingDialog.show('Processing your request..', { rtl: false });
            else
                waitingDialog.show(message, { rtl: false });

            _IsProgressOn = true;
        }

        function HideProgressBar() {
            waitingDialog.hide();
            _IsProgressOn = false;
        }

        $(document).ready(function () {

            // Disable fields by default.
            DisableFields();

            // Initialize the Partner UI.
            GetUI();

            // Events

            $('.date-picker').datepicker({
                format: 'mm/dd/yyyy'
            }).on('changeDate', function () {
                $(this).datepicker('hide');
            });

            $("#disclosureDate").datepicker("option", "disabled", false);

            // Submit button click event
            $('#btnSubmit').on('click', function () {

                var action = $(this).data('action');

                if (action == 'checkstatus') {
                    var orderId = $('#selectedOrderId').val();
                    CheckRequestStatus(orderId);
                }
                else {
                    SubmitRequest();
                }

            });

            // Refresh button click event
            $('#btnRefresh').on('click', function () {
                RefreshUIData();
            });

            // Update Status button click event
            $('#btnUpdateStatus').on('click', function () {
                $('#updateStatusModal').modal('show');
                $("#updateStatusModal").css("z-index", "1500");
            });

            // Add Attachments button click event
            $('#btnAddAttachments').on('click', function () {
                $('#addAttachmentsModal').modal('show');
                $("#addAttachmentsModal").css("z-index", "1500");
            });

            // Request Type radio button change event
            $('input[name=radioRequestType]').on('change', function () {

                var selectedValue = $(this).val();

                DisableFields();

                if (selectedValue == 'new') {
                    $('#btnSubmit').text('Submit Order');
                    $('#amc').removeAttr('disabled');
                    $('#earlyAppraisalConsent').removeAttr('disabled');
                }
                else if (selectedValue == 'existing') {
                    $('#btnSubmit').text('Update Order');
                    $('#existingOrdersList').removeAttr('disabled');
                }
                else if (selectedValue == 'quote')
                    $('#btnSubmit').text('Rate Quote');
            });

            // Products radio change button event
            $(document).on('change', 'input[name=products]', function () {
                $('.radiolist').removeClass('selected');

                if ($(this).is(':checked'))
                    $(this).parent().parent().addClass('selected');
            });

            // Property Characteristics checkbox change event
            $(document).on('change', 'input[name=propertycharacteristics]', function () {
                if ($(this).is(':checked'))
                    $(this).parent().parent().addClass('selected');
                else
                    $(this).parent().parent().removeClass('selected');
            });

            // Tab Change event
            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {

                var target = $(e.target).attr("href");
                if ((target == '#checkStatus')) {
                    GetUI();
                    $('#btnRefresh').css('display', 'none');
                    $('#btnSubmit').text('Check Status');
                    $('#btnSubmit').data('action', 'checkstatus');
                    $('#btnSubmit').attr('disabled', 'disabled');
                    //$('#btnUpdateStatus').css('display', 'inline'); // update status not supported in v1
                } else {
                    $('#btnRefresh').css('display', 'inline');
                    $('#btnSubmit').text('Submit Order');
                    $('#btnSubmit').data('action', 'submit');
                    $('#btnSubmit').removeAttr('disabled');
                    //$('#btnUpdateStatus').css('display', 'none');
                }
            });

            // tab change event that checks if the user is authenticated
            $('#tabContainer a').click(function (e) {
                e.preventDefault();
                if ($(e.target).attr("href") == '#checkStatus' && !_IsAuthenticated) {
                    ShowErrorMessage('Please enter a valid Username and password.');
                    return false;
                }
                else
                    $(this).tab('show');
            });

            InitializeContactsEvents();

            // event for displaying order attachments
            $(document).on('click', '.order-row', function () {
                var transactionId = $(this).data('transactionId');
                var orderDocuments = $(this).data('documents');
                var orderStatus = $(this).data('orderstatus');

                // remove selected class from all the rows
                $('.order-row').removeClass('selected');

                // add selected class in the selected row
                $(this).addClass('selected');
                $('#selectedOrderId').val($(this).data('orderid'));

                // disabled the order status button if the order is complete
                if (orderStatus == 'Completed')
                    $('#btnSubmit').attr('disabled', 'disabled');
                else
                    $('#btnSubmit').removeAttr('disabled');

                if (typeof orderDocuments != 'undefined' && orderDocuments != '') {

                    $('#orderDocuments').html('');
                    $('#downloadedDocs').hide();
                    $('#divNoDocuments').hide();
                    $('#orderDocuments').show();

                    if (orderDocuments != null) {

                        var documentPanel = $('<div class="panel-group" id="accordion">');

                        for (var i = 0; i < orderDocuments.length; i++) {

                            var panelDocument = GetOrderDocumentPanel(orderDocuments[i].name, orderDocuments[i].attachments);
                            $(documentPanel).append(panelDocument);
                            $('#orderDocuments').append($(documentPanel));
                        }

                        $('#downloadedDocs').show();
                    }
                    else
                        $('#divNoDocuments').show();
                }
                else {
                    $('#divNoDocuments').show();
                    $('#orderDocuments').hide();
                    $('#downloadedDocs').hide();
                }
            });


            $('#updateOrderStatus').on('click', function () {
                // Do Nothing
            });

            $('#messageModal').on('hidden.bs.modal', function () {
                HideProgressBar();
            });

            $('#errorModal').on('hidden.bs.modal', function () {
                HideProgressBar();
            });

        });

        function GetOrderDocumentPanel(documentName, attachments) {

            var docName = documentName.replace(' ', '_');
            var panel = $('<div class="panel panel-default">');
            var panelHeading = $('<div class="panel-heading"><h4 class="panel-title"><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#' + docName + '">' + documentName + '</a></h4></div>');
            var panelCollapse = $('<div id="' + docName + '" class="panel-collapse collapse">');
            var panelAttachments = $('<div class="panel-body">');

            if (attachments != null && attachments.length > 0) {
                var listGroup = $('<div class="list-group">');

                for (var j = 0; j < attachments.length; j++) {
                    $(listGroup).append('<a href="#" class="list-group-item">' + attachments[j].name + '</a>');
                }

                $(panel).append(panelHeading);
                $(panelAttachments).append($(listGroup));
                $(panelCollapse).append(panelAttachments);
                $(panel).append(panelCollapse);

                return $(panel);
            }
        }

        function InitializeContactsEvents() {

            $('#contactAgent').on('change', function () {

                var contactAgent = $('#contactAgent option:selected').text();

                var selectedValue = $(this).val();

                $('#contactAgentName').val('');
                $('#contactType1').val(0);
                $('#contactType1Text').val('');

                $('#contactType2').val(0);
                $('#contactType2Text').val('');

                $('#contactAgentName').attr('placeholder', contactAgent + ' Name');

                if (selectedValue != '0') {

                    $('#contactAgentName').removeAttr('disabled');

                    $('#contactType1').removeAttr('disabled');
                    $('#contactType1Text').removeAttr('disabled');

                    $('#contactType2').removeAttr('disabled');
                    $('#contactType2Text').removeAttr('disabled');
                }
                else {
                    $('#contactAgentName').val('');
                    $('#contactAgentName').attr('disabled', 'disabled');

                    $('#contactType1').attr('disabled', 'disabled');

                    $('#contactType1Text').val('');
                    $('#contactType1Text').attr('disabled', 'disabled');

                    $('#contactType2').attr('disabled', 'disabled');

                    $('#contactType2Text').val('');
                    $('#contactType2Text').attr('disabled', 'disabled');
                }
            });

            // Contact Agent Name Textbox change event
            $('#contactAgentName').on('change', function () {
                var currentVal = $(this).val();
                var contactType = $('#contactAgent').val();
                var contactTypeName = $('#contactAgent option:selected').text().toLowerCase();

                $('#' + contactTypeName + 'DtlsName').val(currentVal);
            });

            // Contact Type 1 Textbox change event
            $('#contactType1Text').on('change keyup paste mouseup', function () {
                var currentVal = $(this).val();
                var contactType = $('#contactAgent').val();
                var selectedContactType = $('#contactType1 option:selected').text();
                var contactTypeName = $('#contactAgent option:selected').text().toLowerCase();

                $('#' + contactTypeName + 'DtlsContactType1').val(selectedContactType + ':' + currentVal);
                $('#' + contactTypeName + 'DtlsContactType1').data('contact-type', selectedContactType);
                $('#' + contactTypeName + 'DtlsContactType1').data('value', $('#contactType1').val());
            });

            // Contact Type 2 Textbox change event
            $('#contactType2Text').on('change keyup paste mouseup', function () {
                var currentVal = $(this).val();
                var contactType = $('#contactAgent').val();
                var selectedContactType = $('#contactType2 option:selected').text();
                var contactTypeName = $('#contactAgent option:selected').text().toLowerCase();

                $('#' + contactTypeName + 'DtlsContactType2').val(selectedContactType + ':' + currentVal);
                $('#' + contactTypeName + 'DtlsContactType2').data('contact-type', selectedContactType);
                $('#' + contactTypeName + 'DtlsContactType2').data('value', $('#contactType2').val());
            });
        }

        function DisableFields() {
            $('#existingOrdersList').attr('disabled', 'disabled');
            //$('#existingOrdersList').children().remove(); // remove options from the existing orders dropdown list
            $('#tblOrders').hide();
            $('#divNoOrders').show();
        }

        // This method is used for exception handing on AJAX calls
        function HandleException(request, message, error) {
            var msg = "";
            msg += "Code: " + request.status + "\n";
            msg += "Text: " + request.statusText + "\n";
            if (request.responseJSON != null) {
                msg += "Message" +
                    request.responseJSON.Message + "\n";
            }

            HideProgressBar();

            if (request.status != 200) {
                clearInterval(statusInterval);
                statusInterval = null;
                ShowErrorMessage(_ErrorMessage);
            }
        }


        // This method will populate data that comes back from the Get Origin response
        function PopulateGetOriginData(response) {

            console.log(response);

            // populate borrower information
            if (typeof response != 'undefined' && response != '' && typeof response.originResponse != 'undefined' && response.originResponse != null && typeof response.originResponse.loanData != 'undefined' && response.originResponse.loanData != null) {

                // populate Loan Information
                if (typeof response.originResponse.loanData.Applications != 'undefined' && response.originResponse.loanData.Applications != null && response.originResponse.loanData.Applications.length > 0) {

                    if (response.originResponse.loanData.Applications[0].Borrower) {
                        var borrowerName = response.originResponse.loanData.Applications[0].Borrower.FullNameWithSuffix;
                        $('#inputBorrower').text(borrowerName);

                        // populating payment tab
                        if (borrowerName != '') {
                            $('#accountHolderFirstName').val(borrowerName.split(' ')[0]);
                            $('#accountHolderLastName').val(borrowerName.split(' ')[1]);

                            $('#borrowerName').val(borrowerName);
                        }
                    }

                    if (response.originResponse.loanData.Applications[0].Coborrower) {
                        var coBorrowerName = response.originResponse.loanData.Applications[0].Coborrower.FullNameWithSuffix;
                        $('#inputCoBorrower').text(coBorrowerName);
                    }

                    // var applicationId = response.originResponse.loanData.Applications[0].Id;
                    // $('#inputLoanReference').text(applicationId);


                }

                // populate property information
                if (typeof response.originResponse.loanData.Property != 'undefined' && response.originResponse.loanData.Property != null) {
                    var propertyAddress = response.originResponse.loanData.Property.StreetAddress + ', ' + response.originResponse.loanData.Property.City + '. ' + response.originResponse.loanData.Property.State + '. ' + response.originResponse.loanData.Property.PostalCode;
                    var propertyCounty = response.originResponse.loanData.Property.County;

                    $('#inputPropertyAddress').text(propertyAddress);
                    $('#inputPropertyCounty').text(propertyCounty);

                    // populating borrower info in loan/property tab
                    $('#borrowerAddress').val(response.originResponse.loanData.Property.StreetAddress);
                    $('#borrowerCity').val(response.originResponse.loanData.Property.City);
                    $('#borrowerState').val(response.originResponse.loanData.Property.State);
                    $('#borrowerZip').val(response.originResponse.loanData.Property.PostalCode);

                    // populating payment tab
                    $('#creditCardBillingAddress').val(response.originResponse.loanData.Property.StreetAddress);
                    $('#creditCardBillingCity').val(response.originResponse.loanData.Property.City);
                    $('#creditCardBillingState').val(response.originResponse.loanData.Property.State);
                    $('#creditCardBillingZip').val(response.originResponse.loanData.Property.PostalCode);

                    _LoanPurpose = response.originResponse.loanData.Property.LoanPurposeType;
                    _BorrowerState = response.originResponse.loanData.Property.State;
                }

                if (typeof response.originResponse.loanData.MortgageType != 'undefined' && response.originResponse.loanData.MortgageType != null)
                    _MortgageType = response.originResponse.loanData.MortgageType;

                if (typeof response.originResponse.loanData.BorrowerRequestedLoanAmount != 'undefined' && response.originResponse.loanData.BorrowerRequestedLoanAmount != null) {
                    _LoanAmount = '$' + Number(response.originResponse.loanData.BorrowerRequestedLoanAmount).toLocaleString();
                    $('#inputLoanAmount').text(_LoanAmount);
                }

                if (typeof response.originResponse.loanData.PurchasePriceAmount != 'undefined' && response.originResponse.loanData.PurchasePriceAmount != null) {
                    _PurchasePrice = '$' + Number(response.originResponse.loanData.PurchasePriceAmount).toLocaleString();
                    $('#inputPurchasePrice').text(_PurchasePrice);
                }

                if (typeof response.originResponse.loanData.LenderCaseIdentifier != 'undefined') {
                    $('#inputLoanReference').text(response.originResponse.loanData.LenderCaseIdentifier);
                }

                if (typeof response.originResponse.loanData.AgencyCaseIdentifier != 'undefined') {
                    $('#inputFHACaseNum').text(response.originResponse.loanData.AgencyCaseIdentifier);
                }

                if (typeof response != 'undefined' && response != '' && typeof response.originResponse != 'undefined' && response.originResponse != null && typeof response.originResponse.orderHistory != 'undefined' && response.originResponse.orderHistory != null) {
                    _OrderHistory = response.originResponse.orderHistory;

                    // this method will populate the order history
                    PopulateHistory();
                }
            }
        }

        var _IsAuthenticated = false;

        // This method will populate data that comes back from the UI Response (it will have the list of products, property characteristics, Loan Purpose, Loan Type etc)
        function PopulateUIResponseData(response) {

            if (response != null && response.getUIDataResponse != null && response.getUIDataResponse.inputFields != null) {

                // Enable the Submit button if the response is successful
                $('#btnSubmit').removeAttr('disabled');
                _IsAuthenticated = true;

                var productList = GetItemsList(response.getUIDataResponse.inputFields, 'PRODUCTS');
                var propertyCharacteristicsList = GetItemsList(response.getUIDataResponse.inputFields, 'PROPERTY_CHARACTERISTICS');
                var amcList = GetItemsList(response.getUIDataResponse.inputFields, 'SELECTED_AMC');
                var loanPurposeList = GetItemsList(response.getUIDataResponse.inputFields, 'LOAN_PURPOSE');
                var loanTypeList = GetItemsList(response.getUIDataResponse.inputFields, 'LOAN_TYPE');
                var occupancyList = GetItemsList(response.getUIDataResponse.inputFields, 'OCCUPANTTYPE');
                var propertyTypeList = GetItemsList(response.getUIDataResponse.inputFields, 'PROPERTY_TYPE');
                //var propertyRightsList = GetItemsList(response.getUIDataResponse.inputFields, 'LOAN_TYPE');
                var paymentTypeList = GetItemsList(response.getUIDataResponse.inputFields, 'PAYMENTMETHOD');
                var statesList = GetItemsList(response.getUIDataResponse.inputFields, 'States');

                // Displaying Products List here
                if (productList != null) {
                    $('#productsList').children().remove();
                    for (var i = 0; i < productList.length; i++) {
                        $('#productsList').append('<div class="radio radiolist"><label><input type="radio" name="products" id="' + productList[i].id + '" value="' + productList[i].id + '">' + productList[i].val + '</label></div>');
                    }
                }

                // Displaying AMC List here
                if (amcList != null) {
                    $('#amc').children().remove();
                    for (var i = 0; i < amcList.length; i++) {
                        $('#amc').append('<option value="' + amcList[i].val + '">' + amcList[i].desc + '</option>');
                    }
                }

                // Displaying States List here
                if (statesList != null) {
                    $('#borrowerState').children().remove();
                    $('#coBorrowerState').children().remove();
                    for (var i = 0; i < statesList.length; i++) {
                        $('#borrowerState').append('<option value="' + statesList[i].abbreviation + '">' + statesList[i].name + '</option>');
                        $('#coBorrowerState').append('<option value="' + statesList[i].abbreviation + '">' + statesList[i].name + '</option>');
                    }

                    if (_BorrowerState != null)
                        $('#borrowerState').val(_BorrowerState);
                }


                // Displaying Loan Purpose List here
                if (loanPurposeList != null) {
                    $('#loanPurpose').children().remove();
                    for (var i = 0; i < loanPurposeList.length; i++) {
                        if (i == 0)
                            $('#loanPurpose').append('<option value="0"></option>');
                        $('#loanPurpose').append('<option value="' + loanPurposeList[i].val + '">' + loanPurposeList[i].desc + '</option>');
                    }

                    if (_LoanPurpose != null)
                        $('#loanPurpose').val(_LoanPurpose);
                }

                // Displaying Loan Type List here
                if (loanTypeList != null) {
                    $('#loanType').children().remove();
                    for (var i = 0; i < loanTypeList.length; i++) {
                        if (i == 0)
                            $('#loanType').append('<option value="0"></option>');
                        $('#loanType').append('<option value="' + loanTypeList[i].val + '">' + loanTypeList[i].desc + '</option>');
                    }

                    if (_MortgageType != null)
                        $('#loanType').val(_MortgageType);
                }

                // Displaying Occupancy List here
                if (occupancyList != null) {
                    $('#occupancy').children().remove();
                    for (var i = 0; i < occupancyList.length; i++) {
                        if (i == 0)
                            $('#occupancy').append('<option value="0"></option>');
                        $('#occupancy').append('<option value="' + occupancyList[i].val + '">' + occupancyList[i].desc + '</option>');
                    }
                }

                // Displaying Property Characteristics here
                if (propertyCharacteristicsList != null) {
                    $('#propertyCharacteristics').children().remove();
                    for (var i = 0; i < propertyCharacteristicsList.length; i++) {
                        if (i == 0)
                            $('#propertyCharacteristics').append('<option value="0"></option>');
                        //$('#propertyCharacteristics').append('<option value="' + propertyCharacteristicsList[i].id + '">' + propertyCharacteristicsList[i].val + '</option>');
                        $('#propertyCharacteristics').append('<div class="checkbox checkboxlist"><label><input type="checkbox" name="propertycharacteristics" id="' + propertyCharacteristicsList[i].id + '" value="' + propertyCharacteristicsList[i].id + '">' + propertyCharacteristicsList[i].val + '</label></div>');
                    }
                }

                // Displaying Payment Type List here
                if (paymentTypeList != null) {
                    $('#paymentType').children().remove();
                    for (var i = 0; i < paymentTypeList.length; i++) {
                        if (i == 0)
                            $('#paymentType').append('<option value="0"></option>');
                        $('#paymentType').append('<option value="' + paymentTypeList[i].val + '">' + paymentTypeList[i].desc + '</option>');
                    }
                }

                // Displaying Payment Type List here
                if (propertyTypeList != null) {
                    $('#propertyType').children().remove();
                    for (var i = 0; i < propertyTypeList.length; i++) {
                        if (i == 0)
                            $('#propertyType').append('<option value="0"></option>');
                        $('#propertyType').append('<option value="' + propertyTypeList[i].val + '">' + propertyTypeList[i].desc + '</option>');
                    }
                }
            }
            else {
                ShowErrorMessage('Username and/or password is not correct.');
                _IsAuthenticated = false;
            }

            PopulateHistory();
        }

        // This method is used to populate the previous order details and the order history
        function PopulateHistory() {

            // populating the previous order details here
            if (_OrderHistory != null && typeof _OrderHistory.options != 'undefined') {

                var options = _OrderHistory.options;

                $('#amc').val(options.amc);
                $('#proceedReceivedDate').val(options.proceedReceivedDate);
                $('#disclosureDate').val(options.disclosureDate);

                if (options.earlyAppraisalConsent == true)
                    $('#earlyAppraisalConsent').attr('checked', true);

                $('#earlyAppraisalConsent').val(options.earlyAppraisalConsent);
                $('#orderedBy').val(options.orderedBy);
                $('#notificationEmail').val(options.notificationEmail);
                $('#dueDate').val(options.dueDate);

                if (options.rushOrder == true)
                    $('#chkRushOrder').attr('checked', true);

                if (options.complexProperty == true)
                    $('#chkComplex').attr('checked', true);

                $('#orderComments').val(options.orderComments);
                $('#loanPurpose').val(options.loanPurpose);
                $('#loanType').val(options.loanType);
                $('#occupancy').val(options.occupancy);
                $('#propertyType').val(options.propertyType);
                $('#propertyRights').val(options.propertyRights);

                if (typeof options.productId != 'undefined' && options.productId != null) {
                    $('input[name^="products"]').each(function () {
                        if ($(this).val() == options.productId) {
                            $(this).attr('checked', true);
                            $(this).parent().parent().addClass('selected');
                        }
                    });
                }

                if (typeof options.propertyCharacteristics != 'undefined' && options.propertyCharacteristics != null && options.propertyCharacteristics.length > 0) {

                    var propertyCharacteristicsList = options.propertyCharacteristics;

                    $(propertyCharacteristicsList).each(function (key, value) { //for each element in array

                        $('input[name^="propertycharacteristics"]').each(function () {
                            if ($(this).val() == value) {
                                $(this).attr('checked', true);
                                $(this).parent().parent().addClass('selected');
                            }
                        });
                    });
                }

                // populating borrower information
                if (typeof options.borrower != 'undefined' && options.borrower != '') {
                    var prefix = 'borrower';

                    $('#' + prefix + 'Name').val(options.borrower.name);
                    $('#' + prefix + 'HomePhone').val(options.borrower.homePhone);
                    $('#' + prefix + 'WorkPhone').val(options.borrower.workPhone);
                    $('#' + prefix + 'CellPhone').val(options.borrower.cellPhone);
                    $('#' + prefix + 'Email').val(options.borrower.email);
                    $('#' + prefix + 'Address').val(options.borrower.address);
                    $('#' + prefix + 'City').val(options.borrower.city);
                    $('#' + prefix + 'State').val(options.borrower.state);
                    $('#' + prefix + 'Zip').val(options.borrower.zip);
                }

                // populating coborrower information
                if (typeof options.coborrower != 'undefined' && options.coborrower != '') {
                    var prefix = 'coBorrower';

                    $('#' + prefix + 'Name').val(options.coborrower.name);
                    $('#' + prefix + 'HomePhone').val(options.coborrower.homePhone);
                    $('#' + prefix + 'WorkPhone').val(options.coborrower.workPhone);
                    $('#' + prefix + 'CellPhone').val(options.coborrower.cellPhone);
                    $('#' + prefix + 'Email').val(options.coborrower.email);
                    $('#' + prefix + 'Address').val(options.coborrower.address);
                    $('#' + prefix + 'City').val(options.coborrower.city);
                    $('#' + prefix + 'State').val(options.coborrower.state);
                    $('#' + prefix + 'Zip').val(options.coborrower.zip);
                }

                // populating contacts information
                if (typeof options.contacts != 'undefined' && options.contacts != '') {
                    var contacts = options.contacts;

                    // populating agent details
                    if (typeof contacts.agentDetails != 'undefined' && contacts.agentDetails != '' && contacts.agentDetails.name != '') {
                        var agentDetailsPrefix = 'agentDtls';
                        var agentDetailsContactType1Name = contacts.agentDetails.contactType1Name + ':' + contacts.agentDetails.contactType1; //agentDetailsContactType1Name + ': ' +
                        var agentDetailsContactType2Name = contacts.agentDetails.contactType2Name + ':' + contacts.agentDetails.contactType2; //agentDetailsContactType1Name + ': ' +

                        $('#' + agentDetailsPrefix + 'Name').val(contacts.agentDetails.name);
                        $('#' + agentDetailsPrefix + 'ContactType1').val(agentDetailsContactType1Name);
                        $('#' + agentDetailsPrefix + 'ContactType1Val').val(contacts.agentDetails.contactType1Val);
                        $('#' + agentDetailsPrefix + 'ContactType2').val(agentDetailsContactType2Name);
                        $('#' + agentDetailsPrefix + 'ContactType2Val').val(contacts.agentDetails.contactType2Val);

                        $('#' + agentDetailsPrefix + 'ContactType1').data('contact-type', contacts.agentDetails.contactType1Name);
                        $('#' + agentDetailsPrefix + 'ContactType2').data('contact-type', contacts.agentDetails.contactType2Name);

                    }

                    // populating broker details
                    if (typeof contacts.brokerDetails != 'undefined' && contacts.brokerDetails != '' && contacts.brokerDetails.name != '') {
                        var brokerDetailsPrefix = 'brokerDtls';
                        var brokerDetailsContactType1Name = contacts.brokerDetails.contactType1Name + ':' + contacts.brokerDetails.contactType1; //brokerDetailsContactType1Name + ': ' +
                        var brokerDetailsContactType2Name = contacts.brokerDetails.contactType2Name + ':' + contacts.brokerDetails.contactType2; //brokerDetailsContactType1Name + ': ' +

                        $('#' + brokerDetailsPrefix + 'Name').val(contacts.brokerDetails.name);
                        $('#' + brokerDetailsPrefix + 'ContactType1').val(brokerDetailsContactType1Name);
                        $('#' + brokerDetailsPrefix + 'ContactType1Val').val(contacts.brokerDetails.contactType1Val);
                        $('#' + brokerDetailsPrefix + 'ContactType2').val(brokerDetailsContactType2Name);
                        $('#' + brokerDetailsPrefix + 'ContactType2Val').val(contacts.brokerDetails.contactType2Val);

                        $('#' + brokerDetailsPrefix + 'ContactType1').data('contact-type', contacts.brokerDetails.contactType1Name);
                        $('#' + brokerDetailsPrefix + 'ContactType2').data('contact-type', contacts.brokerDetails.contactType2Name);
                    }

                    // populating Occupant details
                    if (typeof contacts.occupantDetails != 'undefined' && contacts.occupantDetails != '' && contacts.occupantDetails.name != '') {
                        var occupantDetailsPrefix = 'occupantDetails';
                        var occupantDetailsContactType1Name = contacts.occupantDetails.contactType1Name + ':' + contacts.occupantDetails.contactType1; //occupantDetailsContactType1Name + ': ' +
                        var occupantDetailsContactType2Name = contacts.occupantDetails.contactType2Name + ':' + contacts.occupantDetails.contactType2; //occupantDetailsContactType1Name + ': ' +

                        $('#' + occupantDetailsPrefix + 'Name').val(contacts.occupantDetails.name);
                        $('#' + occupantDetailsPrefix + 'ContactType1').val(occupantDetailsContactType1Name);
                        $('#' + occupantDetailsPrefix + 'ContactType1Val').val(contacts.occupantDetails.contactType1Val);
                        $('#' + occupantDetailsPrefix + 'ContactType2').val(occupantDetailsContactType2Name);
                        $('#' + occupantDetailsPrefix + 'ContactType2Val').val(contacts.occupantDetails.contactType2Val);

                        $('#' + occupantDetailsPrefix + 'ContactType1').data('contact-type', contacts.occupantDetails.contactType1Name);
                        $('#' + occupantDetailsPrefix + 'ContactType2').data('contact-type', contacts.occupantDetails.contactType2Name);
                    }

                    // populating Owner details
                    if (typeof contacts.ownerDetails != 'undefined' && contacts.ownerDetails != '' && contacts.ownerDetails.name != '') {
                        var ownerDetailsPrefix = 'ownerDetails';
                        var ownerDetailsContactType1Name = contacts.ownerDetails.contactType1Name + ':' + contacts.ownerDetails.contactType1; //ownerDetailsContactType1Name + ': ' +
                        var ownerDetailsContactType2Name = contacts.ownerDetails.contactType2Name + ':' + contacts.ownerDetails.contactType2; //ownerDetailsContactType1Name + ': ' +

                        $('#' + ownerDetailsPrefix + 'Name').val(contacts.ownerDetails.name);
                        $('#' + ownerDetailsPrefix + 'ContactType1').val(ownerDetailsContactType1Name);
                        $('#' + ownerDetailsPrefix + 'ContactType1Val').val(contacts.ownerDetails.contactType1Val);
                        $('#' + ownerDetailsPrefix + 'ContactType2').val(ownerDetailsContactType2Name);
                        $('#' + ownerDetailsPrefix + 'ContactType2Val').val(contacts.ownerDetails.contactType2Val);

                        $('#' + ownerDetailsPrefix + 'ContactType1').data('contact-type', contacts.ownerDetails.contactType1Name);
                        $('#' + ownerDetailsPrefix + 'ContactType2').data('contact-type', contacts.ownerDetails.contactType2Name);
                    }

                    // populating Other details
                    if (typeof contacts.otherDetails != 'undefined' && contacts.otherDetails != '' && contacts.otherDetails.name != '') {
                        var otherDetailsPrefix = 'otherDetails';
                        var otherDetailsContactType1Name = contacts.otherDetails.contactType1Name + ':' + contacts.otherDetails.contactType1; //otherDetailsContactType1Name + ': ' +
                        var otherDetailsContactType2Name = contacts.otherDetails.contactType2Name + ':' + contacts.otherDetails.contactType2; //otherDetailsContactType1Name + ': ' +

                        $('#' + otherDetailsPrefix + 'Name').val(contacts.otherDetails.name);
                        $('#' + otherDetailsPrefix + 'ContactType1').val(otherDetailsContactType1Name);
                        $('#' + otherDetailsPrefix + 'ContactType1Val').val(contacts.otherDetails.contactType1Val);
                        $('#' + otherDetailsPrefix + 'ContactType2').val(otherDetailsContactType2Name);
                        $('#' + otherDetailsPrefix + 'ContactType2Val').val(contacts.otherDetails.contactType2Val);

                        $('#' + otherDetailsPrefix + 'ContactType1').data('contact-type', contacts.otherDetails.contactType1Name);
                        $('#' + otherDetailsPrefix + 'ContactType2').data('contact-type', contacts.otherDetails.contactType2Name);
                    }

                    if (typeof contacts.appointmentContact != 'undefined')
                        $('#appointmentContact').val(contacts.appointmentContact);

                    if (typeof contacts.branch != 'branch')
                        $('#branch').val(contacts.branch);
                }
            }

            // populating the orders tab here
            if (_OrderHistory != null && typeof _OrderHistory.orders != 'undefined') {
                if (_OrderHistory.orders.length > 0) {

                    $('#tblOrders').show();
                    $('#divNoOrders').hide();
                    $('#downloadedDocs').hide();

                    var ordersList = _OrderHistory.orders;

                    // removing all the existing rows first before adding new ones
                    $("#tblOrders > tbody").html("");

                    // removing items from the existing Orders List
                    $('#existingOrdersList').children().remove();

                    // removing items from the paymentFor List
                    $('#paymentFor').children().remove();
                    $('#paymentFor').append('<option value="new">[New Order]</option>');

                    for (var i = 0; i < ordersList.length; i++) {
                        var rowNumber = i + 1;
                        var dataDocuments = '';
                        var date = ordersList[i].orderDateTime; //new Date(ordersList[i].orderDateTime);
                        var statusClass = 'pending';

                        if (typeof ordersList[i].documents != 'undefined' && ordersList[i].documents != '') {
                            var dataDocs = JSON.stringify(ordersList[i].documents).replace(/"/g, '&quot;'); // need to change this logic
                            dataDocuments = dataDocs;
                        }

                        if (typeof ordersList[i].orderStatus != 'undefined' && ordersList[i].orderStatus != '' && ordersList[i].orderStatus == 'In Progress')
                            statusClass = 'pending';
                        else if (typeof ordersList[i].orderStatus != 'undefined' && ordersList[i].orderStatus != '' && ordersList[i].orderStatus == 'Completed')
                            statusClass = 'completed';
                        else
                            statusClass = 'otherstatus';

                        var row = $('<tr class="order-row" data-orderid="' + ordersList[i].id + '" data-documents="' + dataDocuments + '" data-orderstatus="' + ordersList[i].orderStatus + '"></tr>');
                        $(row).append('<th scope="row">' + rowNumber + '</th>');
                        $(row).append('<td>' + date + '</td>');
                        $(row).append('<td>' + ordersList[i].id + '</td>');
                        $(row).append('<td>' + ordersList[i].product + '</td>');
                        $(row).append('<td><div class="' + statusClass + '">' + ordersList[i].orderStatus + '</div></td>');

                        $('#tblOrders tbody').append(row);

                        if (ordersList[i].orderStatus != 'Completed') { // should we just add pending orders in the existing orders list?
                             //also updating the existing order's list dropdown
                            $('#existingOrdersList').append('<option value="' + ordersList[i].id + '">' + ordersList[i].id + '</option>')
                        }

                        // updating the payment for list from the Payments tab
                        $('#paymentFor').append('<option value="' + ordersList[i].id + '">' + ordersList[i].id + '</option>')
                    }
                }
            }
            else {
                $('#existingOrdersList').children().remove(); // remove options from the existing orders dropdown list
                $('#tblOrders').hide();
                $('#divNoOrders').show();
                $('#downloadedDocs').hide();
            }
        }

        // This method will display a Success Message popup
        function ShowSuccessMessage(successMessage) {
            $('#successMessage').text(successMessage);
            $('#messageModal').modal('show');
            $("#messageModal").css("z-index", "1500");
        }

        // This method will display an Error Message popup
        function ShowErrorMessage(errorMessage) {
            $('#errorMessage').text(errorMessage);
            $('#errorModal').modal('show');
            $("#errorModal").css("z-index", "1500");
            waitingDialog.hide();
        }

        // Gets the List of Items by Name
        function GetItemsList(itemsList, name) {

            var list = null;

            if (itemsList != null) {
                for (var i = 0; i < itemsList.length; i++) {
                    if (itemsList[i].name == name) {
                        list = itemsList[i].list;
                        break;
                    }
                }
            }

            return list;
        }

        // this method will make a call to the Reference Integration API to get UI Data
        function GetUI() {

            ShowProgressBar();

            // Call Web API to get a transaction
            $.ajax({

                url: partnerAPIUrl + getUIEndPoint + transactionId,
                crossDomain: true,
                type: 'GET',
                dataType: 'html',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {

                    console.log(response);

                    HideProgressBar();
                    if (response != '') {
                        var uiResponse = JSON.parse(response);
                        PopulateGetOriginData(uiResponse);
                    }

                },
                error: function (request, message, error) {
                    HandleException(request, message, error);
                }
            });
        }

        // this method will make a call to the Reference Integration API to get UI Data
        function RefreshUIData() {

            var uiPayload = {};
            uiPayload.userName = $('#inputUserName').val();
            uiPayload.password = $('#inputPassword').val();
            uiPayload.networkId = $('#inputNetworkID').val();

            console.log(JSON.stringify(uiPayload));

            ShowProgressBar();

            // Call Web API to get a transaction
            $.ajax({

                url: partnerAPIUrl + getUIEndPoint + transactionId + '/GetUIData',
                crossDomain: true,
                type: 'POST',
                dataType: 'json',
                data: JSON.stringify(uiPayload),
                dataType: 'html',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {

                    console.log(response);

                    HideProgressBar();

                    if (response != '') {
                        var uiResponse = JSON.parse(response);
                        PopulateUIResponseData(uiResponse);
                    }
                },
                error: function (request, message, error) {
                    HandleException(request, message, error);
                }
            });
        }

        // This method will make create a Request
        function CreateRequest() {

            var requestType = $("input:radio[name='radioRequestType']:checked").val();

            // Building emRequiredFields Node here
            var emRequiredFields = {};
            emRequiredFields.requestType = requestType;
            emRequiredFields.saveUserSettings = $('#chkSaveLoginInfo').is(':checked');

            // Building and adding subproducts here
            var subProducts = [];
            var subProduct = {};
            subProduct.name = $("input:radio[name='products']:checked").parent('label').text();
            subProduct.code = $("input:radio[name='products']:checked").val();
            subProducts.push(subProduct);

            emRequiredFields.subProducts = subProducts;

            // Adding emRequiredFields in product node
            // product.emRequiredFields = emRequiredFields;

            var request = {};

            // Building Product Node here
            var product = {};
            product.name = "Appraisal";

            request.product = product;
            request.product.options = GetUserOptions(requestType); // options goes under products

            console.log(JSON.stringify(request));

            return request;
        }

        // This function will return the option selected by the user
        function GetUserOptions(requestType) {
            // Building Options node here
            var options = {};
            options.requestType = requestType;

            if (requestType == 'existing')
                options.existingOrderId = $('#existingOrdersList').val();

            options.productName = $("input:radio[name='products']:checked").parent('label').text();
            options.productId = $("input:radio[name='products']:checked").val();
            options.clientGroup = $('#clientGroup').val();
            options.amc = $('#amc').val();
            options.proceedReceivedDate = $('#proceedReceivedDate').val();
            options.disclosureDate = $('#disclosureDate').val();
            options.earlyAppraisalConsent = $('#earlyAppraisalConsent').is(':checked');
            options.orderedBy = $('#orderedBy').val();
            options.notificationEmail = $('#notificationEmail').val();
            options.dueDate = $('#dueDate').val();
            options.rushOrder = $('#chkRushOrder').is(':checked');
            options.complexProperty = $('#chkComplex').is(':checked');
            options.orderComments = $('#orderComments').val();
            options.loanPurpose = $('#loanPurpose').val();
            options.loanType = $('#loanType').val();
            options.occupancy = $('#occupancy').val();
            options.propertyType = $('#propertyType').val();
            options.propertyRights = $('#propertyRights').val();

            var propertyCharacteristics = [];
            $('input[name=propertycharacteristics]:checked').map(function () {
                propertyCharacteristics.push($(this).val());
            });

            options.propertyCharacteristics = propertyCharacteristics;
            options.borrower = GetBorrowerInformation();
            options.coborrower = GetCoBorrowerInformation();
            options.contacts = GetContactsInformation();

            return options;
        }

        // This function will get the contacts information
        function GetContactsInformation() {

            var contacts = {};

            contacts.agentDetails = GetContactByType('agent');
            contacts.brokerDetails = GetContactByType('broker');
            contacts.occupantDetails = GetContactByType('occupant');
            contacts.ownerDetails = GetContactByType('owner');
            contacts.otherDetails = GetContactByType('other');
            contacts.appointmentContact = $('#appointmentContact').val();
            contacts.branch = $('#branch').val();

            return contacts;
        }

        // This function will get contact by Contact Tpye Name
        function GetContactByType(typeName) {

            var contactType = {};

            var contactName = $('#' + typeName + 'DtlsName');
            var contactType1 = $('#' + typeName + 'DtlsContactType1');
            var contactType2 = $('#' + typeName + 'DtlsContactType2');

            contactType.name = contactName.val();
            contactType.typeName = typeName;

            if (contactType1 != '') {
                contactType.contactType1 = contactType1.val().split(':')[1];
                contactType.contactType1Val = contactType1.data('value');
                contactType.contactType1Name = contactType1.data('contact-type');
            }

            if (contactType2 != '') {
                contactType.contactType2 = contactType2.val().split(':')[1];
                contactType.contactType2Val = contactType2.data('value');
                contactType.contactType2Name = contactType2.data('contact-type');
            }

            return contactType;
        }

        // This method will get the Borrower Information
        function GetBorrowerInformation() {
            var borrower = {};
            borrower.name = $('#borrowerName').val();
            borrower.homePhone = $('#borrowerHomePhone').val();
            borrower.workPhone = $('#borrowerWorkPhone').val();
            borrower.cellPhone = $('#borrowerCellPhone').val();
            borrower.email = $('#borrowerEmail').val();
            borrower.address = $('#borrowerAddress').val();
            borrower.city = $('#borrowerCity').val();
            borrower.state = $('#borrowerState').val();
            borrower.zip = $('#borrowerZip').val();

            return borrower;
        }

        // This function will get the User Settings Information
        function GetUserSettingsInformation() {
            var userSettings = null;
            var username = $('#inputUserName').val();
            var password = $('#inputPassword').val();

            if (username != '' && password != '') {
                var networkId = $('#inputNetworkID').val();
                var savePassword = $('#saveLoginInfo').is(':checked');

                userSettings = {};
                var credentials = {};

                credentials.UserName = username;
                credentials.Password = password;
                credentials.Encrypted = false;
                credentials.NetworkId = networkId;
                credentials.SavePassword = savePassword;

                userSettings.credentials = credentials;
            }

            return userSettings;
        }

        // This method will get the CoBorrower Information
        function GetCoBorrowerInformation() {
            var coBorrower = {};
            coBorrower.name = $('#coBorrowerName').val();
            coBorrower.homePhone = $('#coBorrowerHomePhone').val();
            coBorrower.workPhone = $('#coBorrowerWorkPhone').val();
            coBorrower.cellPhone = $('#coBorrowerCellPhone').val();
            coBorrower.email = $('#coBorrowerEmail').val();
            coBorrower.address = $('#coBorrowerAddress').val();
            coBorrower.city = $('#coBorrowerCity').val();
            coBorrower.state = $('#coBorrowerState').val();
            coBorrower.zip = $('#coBorrowerZip').val();

            return coBorrower;
        }


        // This method will Submit the Request to the Reference Integration
        function SubmitRequest() {
            var requestData = CreateRequest();
            var submitURL = partnerAPIUrl + requestEndPoint + transactionId;

            console.log('Submit URL - ' + submitURL);

            ShowProgressBar(_OrderProcessMessage);

            // Call Web API to submit a request
            $.ajax({

                url: submitURL,
                crossDomain: true,
                type: 'POST',
                data: JSON.stringify(requestData),
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    console.log('Request Submitted');
                    //$body.removeClass("loading");

                    // if the request is submitted, then set a timer to check for the Order status every 3 seconds.
                    statusInterval = setInterval(CheckAcknowledgement, 3000);

                    //ShowSuccessMessage('Order Request Submitted Successfully');
                },
                error: function (request, message, error) {
                    ShowErrorMessage(request.responseText);
                    //HandleException(request, message, error);
                }
            });
        }

        function CheckRequestStatus(orderId) {
            var checkStatusURL = partnerAPIUrl + statusCheckEndPoint + transactionId + '/' + orderId;

            console.log('Check Status URL - ' + checkStatusURL);

            var checkStatusMessage = _CheckStatusMessage.replace('#orderno#', orderId);

            ShowProgressBar(checkStatusMessage);

            // Call Web API to check request status
            $.ajax({

                url: checkStatusURL,
                crossDomain: true,
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    console.log(response);
                    ShowSuccessMessage(response.result.orderMessage);
                    HideProgressBar();
                },
                error: function (request, message, error) {
                    HandleException(request, message, error);
                }
            });
        }

        var _StatusCheckTimeout = 0;

        // This method will check the status of a given transaction
        function CheckAcknowledgement() {
            var acknowledgementCheckURL = partnerAPIUrl + statusCheckEndPoint + transactionId;

            console.log('Status Check URL - ' + acknowledgementCheckURL);

            if (_StatusCheckTimeout == _OrderStatusTimeout) {
                console.log("reached Timeout");
                clearInterval(statusInterval);
                statusInterval = null;
                ShowErrorMessage('There was an error processing the request. Request timed out.');
                HideProgressBar();
                return;
            }

            if (!_IsProgressOn)
                ShowProgressBar(_OrderProcessMessage);

            _StatusCheckTimeout = _StatusCheckTimeout + 1;

            $.ajax({
                url: acknowledgementCheckURL,
                crossDomain: true,
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (response) {
                    console.log(response);
                    try {
                        if (response != null && typeof response.status != 'undefined') {
                            if (response.status != 'Not Found') {

                                if (typeof response.status.status != 'undefined') {
                                    if (response.status.status == 'Failed') {
                                        ShowErrorMessage(response.status.result.orderMessage);
                                        clearInterval(statusInterval);
                                        statusInterval = null;
                                        HideProgressBar();
                                    }
                                    else {
                                        ShowSuccessMessage(response.status.result.orderMessage);
                                        clearInterval(statusInterval);
                                        statusInterval = null;
                                        HideProgressBar();
                                    }
                                }
                                else {
                                    ShowSuccessMessage(response.status.result.orderMessage);
                                    clearInterval(statusInterval);
                                    statusInterval = null;
                                    HideProgressBar();
                                }
                            }
                        }
                    }
                    catch (err) {
                        ShowErrorMessage(err);
                        clearInterval(statusInterval);
                        statusInterval = null;
                        HideProgressBar();
                    }
                },
                error: function (request, message, error) {
                    HandleException(request, message, error);
                }
            });
        }
    </script>
</body>
</html>
